FROM golang:1.24.1-alpine3.21

RUN apk add --no-cache tzdata
ENV TZ=Asia/Tokyo
RUN cp /usr/share/zoneinfo/$TZ /etc/localtime && echo $TZ > /etc/timezone

# ワークスペースの作成
RUN mkdir /go/src/app

# ルートファイルを全てワークスペースにコピー
ADD . /go/src/app

#SQLBoilerのインストール mysqlターゲット
RUN go install github.com/aarondl/sqlboiler/v4@v4.19.5
RUN go install github.com/aarondl/sqlboiler/v4/drivers/sqlboiler-psql@v4.19.5

RUN apk add --update && apk add git gcc libc-dev

EXPOSE 8080
